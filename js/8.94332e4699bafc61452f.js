(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{D1y3:function(e,t,l){},Zqm2:function(e,t,l){"use strict";var s=l("D1y3");l.n(s).a},kz8w:function(e,t,l){"use strict";l.r(t);var s=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-row",[l("el-card",[l("div",{staticClass:"buttons"},[l("div",[l("span",[e._v("Show Plain Text:")]),e._v(" "),l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.save},model:{value:e.plainText,callback:function(t){e.plainText=t},expression:"plainText"}})],1),e._v(" "),l("div",[l("span",[e._v("Mode Switch:")]),e._v(" "),l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.save},model:{value:e.splitMode,callback:function(t){e.splitMode=t},expression:"splitMode"}})],1),e._v(" "),e.splitMode?e._e():l("div",[l("span",[e._v("Thin:")]),e._v(" "),l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.save},model:{value:e.thin,callback:function(t){e.thin=t},expression:"thin"}})],1)])])],1),e._v(" "),l("el-row",{attrs:{gutter:10}},[l("el-col",{attrs:{span:8}},[l("el-input",{attrs:{autosize:{minRows:30},type:"textarea",placeholder:"请输入内容"},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}})],1),e._v(" "),e.plainText?l("el-col",{attrs:{span:8}},[l("el-input",{attrs:{autosize:{minRows:30},type:"textarea",placeholder:"请输入内容"},model:{value:e.format[0],callback:function(t){e.$set(e.format,0,t)},expression:"format[0]"}})],1):e._e(),e._v(" "),l("el-col",{attrs:{span:e.plainText?8:16}},[l("div",{staticClass:"result",domProps:{innerHTML:e._s(e.format[1])}})])],1)],1)};s._withStripped=!0;var a={name:"Xml",data:()=>({source:"",splitMode:void 0,plainText:void 0,thin:void 0,isMounted:!1}),computed:{format(){if(console.log("save"),this.isMounted&&this.save(),this.source=this.source.replace(/\n/g,"").replace(/\t/g," ").replace(/>[ ]+/g,">").replace(/[ ]+</g,"<").replace(/ +/g," "),this.splitMode)return this.formatXmlBySplit(this.source);{let e=this.formatXmlByDOMParser(this.source);if(this.thin){let t=e[2],l="";if(t)for(let e of t)e&&""!==e.replace(/[ ㅤ]*\t*/g,"")&&(l+=e);this.source=l}return e}}},mounted(){console.log("get"),this.get(),this.isMounted=!0},methods:{formatXmlByDOMParser(e){if(!e)return["",""];let t=null;const l=e.replace(/[\n\r]/g,"");try{t=(new DOMParser).parseFromString(l,"text/xml")}catch(e){return!1}let s=[[],[],[]];return console.log("--------------"),this.formatXmlWithDOMParser(s,t.documentElement,0),[s[0].join(""),s[1].join(""),s[2]]},formatXmlWithDOMParser(e,t,l){let s=t.nodeType,a="ㅤ",n=e[0],i=e[1],o=e[2];switch(s){case Node.ELEMENT_NODE:o.push("<"+t.nodeName+">"),n.push("".padStart(l*a.length,a)+"<"+t.nodeName+">"),n.push("\n"),i.push("".padStart(l*a.length,a)+`<span class="inline xml_item_${l}">&lt;${t.nodeName}></span>`),i.push("<br/>");for(let s=0;s<t.childNodes.length;s++)this.formatXmlWithDOMParser(e,t.childNodes[s],l+1);0===t.childNodes.length&&(n.splice(n.length-1,1),i.splice(i.length-1,1),a=""),t.childNodes[0]&&-1===[Node.ELEMENT_NODE,Node.COMMENT_NODE].indexOf(t.childNodes[0].nodeType)&&(n.splice(n.length-2,1),i.splice(i.length-2,1),a=""),o.push("</"+t.nodeName+">"),n.push("".padStart(l*a.length,a)+"</"+t.nodeName+">"),n.push("\n"),i.push("".padStart(l*a.length,a)+`<span class="inline xml_item_${l}">&lt;/${t.nodeName}></span>`),i.push("<br/>");break;case Node.TEXT_NODE:o.push(t.nodeValue),n.push(t.nodeValue),i.push(`<span class="inline xml_item_text">${t.nodeValue}</span>`);break;case Node.COMMENT_NODE:o.push("\x3c!-- "+t.nodeValue+" --\x3e"),n.push("".padStart(l*a.length,a)+"\x3c!-- "+t.nodeValue+" --\x3e"),n.push("\n"),i.push("".padStart(l*a.length,a)+`<span class="inline xml_item_${l}">&lt;!-- </span>`),i.push(`<span class="inline xml_item_comment">${t.nodeValue}</span>`),i.push(`<span class="inline xml_item_${l}"> --\x3e</span>`),i.push("<br/>");break;case Node.CDATA_SECTION_NODE:o.push(t.nodeValue),n.push(t.nodeValue),i.push(`<span class="inline xml_item_cdata">${t.nodeValue}</span>`)}},formatXmlBySplit(e){let t=e.replace(/<!\[CDATA\[[\s\S]*?]]>/g,e=>`BEGIN_CDATA${encodeURIComponent(e)}END_CDATA`).split("<");t=t.slice(1);let l=[];for(let e of t)if(e="<"+e,e.lastIndexOf(">")===e.length-1)l.push(e);else{let t=e.split(">");l.push(t[0]+">"),l.push(t[1])}let s=[];for(let e of l)e&&""!==e.trim()&&"\n"!==e.trim()&&s.push(e);let a=-1,n=[],i=[],o=!1,r=!0;for(let e of s){let t,l;e=e.replace(/BEGIN_CDATA.*?END_CDATA/g,e=>decodeURIComponent(e.replace("BEGIN_CDATA","").replace("END_CDATA",""))),e=e.replace("<","&lt;"),e=e.replace(">","&gt;"),0===e.indexOf("&lt;?")&&e.lastIndexOf("?&gt;")===e.length-5||0===e.indexOf("&lt;!--")&&e.lastIndexOf("--&gt;")===e.length-6?(o||a++,o=!0,r=!1,t=`my_blank_word${e}\n`,l=`<div class="xml_item_${a}">my_blank_word<span>${e}</span></div>`):0===e.indexOf("&lt;![CDATA")?(o||a++,o=!0,r=!0,t=`my_blank_word${e}\n`,l=`<span class="xml_item_cdata">&lt;![CDATA[</span>${e.substring(12,e.length-6)}<span class="xml_item_cdata">]]&gt;</span>`,l=`<div class="xml_item_text">my_blank_word<span>${l}</span></div>`):0===e.indexOf("&lt;!")?(o||a++,o=!0,r=!1,t=`my_blank_word${e}\n`,l=`<div class="xml_item_${a}">my_blank_word<span>${e}</span></div>`):0===e.indexOf("&lt;/")?((r||o)&&a--,o=!0,r=!1,t=`my_blank_word${e}\n`,l=`<div class="xml_item_${a}">my_blank_word<span>${e}</span></div>`):0===e.indexOf("&lt;")&&e.lastIndexOf("/&gt;")===e.length-5?(o||a++,o=!0,r=!1,t=`my_blank_word${e}\n`,l=`<div class="xml_item_${a}">my_blank_word<span>${e}</span></div>`):0===e.indexOf("&lt;")?(o||a++,o=!1,r=!1,t=`my_blank_word${e}\n`,l=`<div class="xml_item_${a}">my_blank_word<span>${e}</span></div>`):(a++,o=!1,r=!0,t=`my_blank_word${e}\n`,l=`<div class="xml_item_text">my_blank_word<span>${e}</span></div>`);let s="",p="";for(let e=0;e<a;e++)s+='<span class="xml_space"></span>',p+="  ";t=t.replace("my_blank_word",p),l=l.replace("my_blank_word",s),i.push(l),n.push(t)}let p="",c="";for(let e of i)p+=e;for(let e of n)c+=e;return c=c.replace(/&lt;/g,"<"),c=c.replace(/&gt;/g,">"),[c,p]},save(){let e={source:this.source,plainText:this.plainText,thin:this.thin,splitMode:this.splitMode};localStorage.setItem("xmlData",JSON.stringify(e))},get(){let e;try{e=JSON.parse(localStorage.getItem("xmlData"))}catch(t){e={source:"",plainText:!0,thin:!0,splitMode:!0}}this.source=e.source,this.plainText=e.plainText,this.thin=e.thin,this.splitMode=e.splitMode,console.log(this.pretty)}}},n=(l("Zqm2"),l("KHd+")),i=Object(n.a)(a,s,[],!1,null,"7eb3d0ce",null);i.options.__file="src/views/tools/Xml.vue";t.default=i.exports}}]);