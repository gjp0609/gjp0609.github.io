import{_ as _export_sfc,e as resolveComponent,a as openBlock,c as createElementBlock,F as Fragment,b as renderList,n as normalizeClass,i as createBaseVNode,t as toDisplayString,f as createBlock,k as createCommentVNode,d as defineComponent,r as ref,o as onMounted,m as watch,g as createVNode,w as withCtx,q as withDirectives,v as vShow,p as pushScopeId,l as popScopeId}from"./index.eb819c3c.js";var JsonDisplay_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$1={name:"JsonDisplay",props:{obj:void 0,index:void 0,expand:void 0},data(){return{shows:{},props:{}}},computed:{computedObj:function(){if(console.log("computed obj, ",this.obj),this.obj&&this.obj instanceof Object)for(const t in this.obj){let a=this.obj[t],o="text";a instanceof Object&&(JSON.stringify(a)==="{}"||JSON.stringify(a)==="[]"?o="text":a instanceof Array?o="array":o="object"),this.shows[t]={isOpen:this.expand||o==="text",type:o}}return this.obj}},methods:{isNotEmpty(t){return JSON.stringify(t)!=="{}"&&JSON.stringify(t)!=="[]"},isObject(t){return t instanceof Object},isArray(t){return t instanceof Array},isOpen(t){return this.shows[t]&&this.shows[t].isOpen},getType(t){return this.shows[t]&&this.shows[t].type},switchShow(t){this.shows[t]&&this.shows[t].type!=="text"&&(this.shows[t].isOpen=!this.shows[t].isOpen)}}},_hoisted_1$1={class:"value"},_hoisted_2$1=["onClick"],_hoisted_3$1={class:"button"},_hoisted_4$1={key:1,class:"text",style:{color:"red"}},_hoisted_5$1={key:1,class:"text"},_hoisted_6={key:1,class:"text",style:{color:"red","text-decoration":"underline"}};function _sfc_render(t,a,o,i,l,s){const c=resolveComponent("json-display",!0);return openBlock(),createElementBlock("div",_hoisted_1$1,[s.computedObj?(openBlock(),createElementBlock(Fragment,{key:0},[s.isObject(o.obj)?(openBlock(),createElementBlock(Fragment,{key:0},[s.isNotEmpty(o.obj)?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(o.obj,(n,r)=>(openBlock(),createElementBlock("div",{class:normalizeClass([s.getType(r)?l.shows[r].type:"","wrapper"])},[createBaseVNode("div",{class:normalizeClass((s.isOpen(r)?"open":"close")+` index-${o.index} `+(s.isArray(o.obj)?"index":"key"))},[createBaseVNode("span",{class:"button-wrapper",onClick:d=>s.switchShow(r)},[createBaseVNode("span",_hoisted_3$1,toDisplayString(s.getType(r)==="text"?"\xA0":s.isOpen(r)?"-":"+"),1),createBaseVNode("span",null,toDisplayString(r)+":",1)],8,_hoisted_2$1)],2),s.isOpen(r)?(openBlock(),createBlock(c,{key:0,obj:n,index:o.index+1,expand:o.expand},null,8,["obj","index","expand"])):createCommentVNode("",!0)],2))),256)):(openBlock(),createElementBlock("div",_hoisted_4$1,toDisplayString(s.isArray(o.obj)?"[]":"{}"),1))],64)):(openBlock(),createElementBlock("div",_hoisted_5$1,toDisplayString(o.obj),1))],64)):(openBlock(),createElementBlock("div",_hoisted_6,"NULL"))])}var JsonDisplay=_export_sfc(_sfc_main$1,[["render",_sfc_render],["__scopeId","data-v-53566349"]]),Json_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId=t=>(pushScopeId("data-v-0fb253a2"),t=t(),popScopeId(),t),_hoisted_1={class:"buttons"},_hoisted_2=_withScopeId(()=>createBaseVNode("span",null,"Expand All:",-1)),_hoisted_3=_withScopeId(()=>createBaseVNode("span",null,"Auto Format:",-1)),_hoisted_4=_withScopeId(()=>createBaseVNode("span",null,"Pretty:",-1)),_hoisted_5={class:"json-text"},_sfc_main=defineComponent({__name:"Json",setup(__props){const source=ref(""),target=ref({}),expand=ref(!0),autoFormat=ref(!0),pretty=ref(!0),isMounted=ref(!1);onMounted(()=>{console.log("mounted"),get(),isMounted.value=!0}),watch([source,expand,autoFormat,pretty],values=>{isMounted.value&&save();let src=values[0];if(src){console.log("%c source","color:green",src);let obj;try{src=src.replace(/:\s*([-+Ee0-9.]{16,})/g,': "$1"'),src=src.replace(/\n/g,""),obj=JSON.parse(src)}catch(e){console.warn(">>> parse json error, ",e);try{obj=eval("("+src+")")}catch(t){console.warn(">>> parse single quot json error, ",t)}}if(obj){console.log("%c obj","color:blue",obj),autoFormat.value&&(source.value=JSON.stringify(obj),pretty.value&&(source.value=JSON.stringify(obj,null,2))),target.value=obj;return}}target.value={}});function save(){let t={source:source.value,expand:expand.value,autoFormat:autoFormat.value,pretty:pretty.value};localStorage.setItem("jsonData",JSON.stringify(t))}function get(){var a;let t;try{t=JSON.parse((a=localStorage.getItem("jsonData"))!=null?a:"")}catch{t={source:"",expand:!0,autoFormat:!0,pretty:!0}}source.value=t.source,expand.value=t.expand,autoFormat.value=t.autoFormat,pretty.value=t.pretty}return(t,a)=>{const o=resolveComponent("el-switch"),i=resolveComponent("el-card"),l=resolveComponent("el-row"),s=resolveComponent("el-input"),c=resolveComponent("el-col");return openBlock(),createElementBlock("div",null,[createVNode(l,null,{default:withCtx(()=>[createVNode(i,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1,[createBaseVNode("div",null,[_hoisted_2,createVNode(o,{modelValue:expand.value,"onUpdate:modelValue":a[0]||(a[0]=n=>expand.value=n),"active-color":"#13ce66","inactive-color":"#ff4949",onChange:save},null,8,["modelValue"])]),createBaseVNode("div",null,[_hoisted_3,createVNode(o,{modelValue:autoFormat.value,"onUpdate:modelValue":a[1]||(a[1]=n=>autoFormat.value=n),"active-color":"#13ce66","inactive-color":"#ff4949",onChange:save},null,8,["modelValue"])]),withDirectives(createBaseVNode("div",null,[_hoisted_4,createVNode(o,{modelValue:pretty.value,"onUpdate:modelValue":a[2]||(a[2]=n=>pretty.value=n),"active-color":"#13ce66","inactive-color":"#ff4949",onChange:save},null,8,["modelValue"])],512),[[vShow,autoFormat.value]])])]),_:1})]),_:1}),createVNode(l,{gutter:10},{default:withCtx(()=>[createVNode(c,{span:8},{default:withCtx(()=>[createVNode(s,{modelValue:source.value,"onUpdate:modelValue":a[3]||(a[3]=n=>source.value=n),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),createVNode(c,{span:16},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5,[createVNode(JsonDisplay,{obj:target.value,index:1,expand:expand.value},null,8,["obj","expand"])])]),_:1})]),_:1})])}}});var Json=_export_sfc(_sfc_main,[["__scopeId","data-v-0fb253a2"]]);export{Json as default};
